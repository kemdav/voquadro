# ğŸ“ Cloud AI Architecture Diagram

## ğŸ—ï¸ System Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        VoQuadro App                             â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚              User Interface Layer                         â”‚ â”‚
â”‚  â”‚                                                           â”‚ â”‚
â”‚  â”‚  â€¢ Speech Recording                                       â”‚ â”‚
â”‚  â”‚  â€¢ Question Display                                       â”‚ â”‚
â”‚  â”‚  â€¢ Feedback Display                                       â”‚ â”‚
â”‚  â”‚  â€¢ AI Status Indicator â† NEW!                            â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                            â†“ â†‘                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚           HybridAIService (Orchestrator)                  â”‚ â”‚
â”‚  â”‚                                                           â”‚ â”‚
â”‚  â”‚  Priority: Cloud AI â†’ Ollama â†’ Fallback                  â”‚ â”‚
â”‚  â”‚                                                           â”‚ â”‚
â”‚  â”‚  Methods:                                                 â”‚ â”‚
â”‚  â”‚  â€¢ generateQuestion()                                     â”‚ â”‚
â”‚  â”‚  â€¢ getPublicSpeakingFeedbackWithScores()                 â”‚ â”‚
â”‚  â”‚  â€¢ checkAIAvailability()                                  â”‚ â”‚
â”‚  â”‚  â€¢ activeAIService getter â† NEW!                         â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚           â†“              â†“              â†“                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚  Cloud AI    â”‚ â”‚   Ollama     â”‚ â”‚  Fallback    â”‚           â”‚
â”‚  â”‚  Service     â”‚ â”‚   Service    â”‚ â”‚  Services    â”‚           â”‚
â”‚  â”‚  âœ¨ NEW!     â”‚ â”‚              â”‚ â”‚              â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚       â†“                 â†“                 â†“                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                 â”‚                 â”‚
        â†“                 â†“                 â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Google     â”‚  â”‚   Ollama     â”‚  â”‚   Static     â”‚
â”‚   Gemini     â”‚  â”‚   Local      â”‚  â”‚   Data       â”‚
â”‚   API        â”‚  â”‚   Server     â”‚  â”‚   (Offline)  â”‚
â”‚              â”‚  â”‚              â”‚  â”‚              â”‚
â”‚ â€¢ Cloud      â”‚  â”‚ â€¢ Desktop    â”‚  â”‚ â€¢ 200+       â”‚
â”‚ â€¢ Fast       â”‚  â”‚ â€¢ Private    â”‚  â”‚   Questions  â”‚
â”‚ â€¢ Mobile     â”‚  â”‚ â€¢ Dev Only   â”‚  â”‚ â€¢ Rules      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”„ Request Flow

### Scenario 1: Mobile User (Online) âœ… Recommended

```
User taps "Generate Question"
         â†“
HybridAIService.generateQuestion("Technology")
         â†“
Check: Is Cloud AI available?
         â†“
    âœ… YES (API key set + internet)
         â†“
CloudAIService.generateQuestion()
         â†“
Call Gemini API
         â†“
Receive AI-generated question
         â†“
Return to UI
         â†“
Display question to user
```

### Scenario 2: Mobile User (Offline)

```
User taps "Generate Question"
         â†“
HybridAIService.generateQuestion("Technology")
         â†“
Check: Is Cloud AI available?
         â†“
    âŒ NO (no internet)
         â†“
Check: Is Ollama available?
         â†“
    âŒ NO (mobile doesn't have Ollama)
         â†“
FallbackQuestionService.createFallbackSession()
         â†“
Select from 200+ static questions
         â†“
Return to UI
         â†“
Display question to user
```

### Scenario 3: Desktop Developer

```
User taps "Generate Question"
         â†“
HybridAIService.generateQuestion("Technology")
         â†“
Check: Is Cloud AI available?
         â†“
    âœ… YES (fast, preferred)
         â†“
Try CloudAIService.generateQuestion()
         â†“
    âœ… SUCCESS
         â†“
Return to UI

(If Cloud AI failed, would try Ollama next)
```

## ğŸ“Š Service Priority Matrix

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Scenario    â”‚  Cloud AI  â”‚ Ollama  â”‚ Fallback â”‚ Result       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Mobile +     â”‚     âœ…     â”‚   âŒ    â”‚    âœ…    â”‚ Cloud AI     â”‚
â”‚ Internet     â”‚  Available â”‚   N/A   â”‚ Backup   â”‚ (Primary)    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Mobile +     â”‚     âŒ     â”‚   âŒ    â”‚    âœ…    â”‚ Fallback     â”‚
â”‚ Offline      â”‚ No Internetâ”‚   N/A   â”‚  Active  â”‚ (Static)     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Desktop +    â”‚     âœ…     â”‚   âœ…    â”‚    âœ…    â”‚ Cloud AI     â”‚
â”‚ Both         â”‚  Primary   â”‚ Backup  â”‚ Backup   â”‚ (Fastest)    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Desktop +    â”‚     âŒ     â”‚   âœ…    â”‚    âœ…    â”‚ Ollama       â”‚
â”‚ Ollama Only  â”‚ No API Key â”‚ Active  â”‚ Backup   â”‚ (Local)      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ No AI        â”‚     âŒ     â”‚   âŒ    â”‚    âœ…    â”‚ Fallback     â”‚
â”‚ Available    â”‚     No     â”‚   No    â”‚  Always  â”‚ (Always OK)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ¯ Decision Tree

```
                    Start Request
                          â”‚
                          â†“
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚ Cloud AI Check  â”‚
                â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â†“                             â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ YES âœ…  â”‚                   â”‚ NO âŒ   â”‚
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜                   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
         â”‚                             â”‚
         â†“                             â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Try Cloud   â”‚            â”‚ Ollama Checkâ”‚
    â”‚ AI (Gemini) â”‚            â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                   â”‚
           â”‚               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”         â†“                       â†“
      â†“         â†“    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”Œâ”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”â”‚ YES âœ…  â”‚           â”‚ NO âŒ   â”‚
  â”‚Successâ”‚ â”‚Failed â”‚â”‚         â”‚           â”‚         â”‚
  â”‚   âœ…  â”‚ â”‚  âŒ   â”‚â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
  â””â”€â”€â”€â”¬â”€â”€â”€â”˜ â””â”€â”€â”€â”¬â”€â”€â”€â”˜     â”‚                     â”‚
      â”‚         â”‚         â†“                     â†“
      â”‚         â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚         â”‚    â”‚ Try Ollama  â”‚      â”‚ Fallback â”‚
      â”‚         â”‚    â”‚  (Local)    â”‚      â”‚ (Static) â”‚
      â”‚         â”‚    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
      â”‚         â”‚           â”‚                   â”‚
      â”‚         â”‚      â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”              â”‚
      â”‚         â”‚      â†“         â†“              â”‚
      â”‚         â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”          â”‚
      â”‚         â”‚  â”‚Successâ”‚ â”‚Failed â”‚          â”‚
      â”‚         â”‚  â”‚   âœ…  â”‚ â”‚  âŒ   â”‚          â”‚
      â”‚         â”‚  â””â”€â”€â”€â”¬â”€â”€â”€â”˜ â””â”€â”€â”€â”¬â”€â”€â”€â”˜          â”‚
      â”‚         â”‚      â”‚         â”‚              â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â†“
                 Return Result
```

## ğŸ”Œ Component Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   CloudAIService                        â”‚
â”‚                                                         â”‚
â”‚  â€¢ checkAvailability()                                  â”‚
â”‚  â€¢ generateQuestion(topic)                              â”‚
â”‚  â€¢ getComprehensiveFeedback(...)                       â”‚
â”‚  â€¢ getPublicSpeakingFeedback(...)                      â”‚
â”‚  â€¢ contentQualityScore(transcript)                      â”‚
â”‚  â€¢ clarityStructureScore(transcript)                    â”‚
â”‚                                                         â”‚
â”‚  â†’ Google Gemini API                                    â”‚
â”‚  â†’ Model: gemini-1.5-flash                             â”‚
â”‚  â†’ Format: JSON responses                               â”‚
â”‚  â†’ Timeout: 30 seconds                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   HybridAIService                       â”‚
â”‚                                                         â”‚
â”‚  State:                                                 â”‚
â”‚  â€¢ _isCloudAIAvailable: bool                           â”‚
â”‚  â€¢ _isOllamaAvailable: bool                            â”‚
â”‚  â€¢ _currentSession: SpeechSession?                     â”‚
â”‚                                                         â”‚
â”‚  Getters:                                               â”‚
â”‚  â€¢ activeAIService: String                             â”‚
â”‚  â€¢ isCloudAIAvailable: bool                            â”‚
â”‚  â€¢ isOllamaAvailable: bool                             â”‚
â”‚  â€¢ isUsingFallback: bool                               â”‚
â”‚                                                         â”‚
â”‚  Methods:                                               â”‚
â”‚  â€¢ checkAIAvailability()                               â”‚
â”‚  â€¢ generateQuestion(topic)                              â”‚
â”‚  â€¢ getPublicSpeakingFeedbackWithScores(...)           â”‚
â”‚  â€¢ contentQualityScore(transcript)                      â”‚
â”‚  â€¢ clarityStructureScore(transcript)                    â”‚
â”‚  â€¢ overallScore(transcript)                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              FallbackQuestionService                    â”‚
â”‚                                                         â”‚
â”‚  â€¢ 200+ static questions                                â”‚
â”‚  â€¢ 20+ topic categories                                 â”‚
â”‚  â€¢ Instant response (<100ms)                           â”‚
â”‚  â€¢ No internet required                                 â”‚
â”‚  â€¢ Always available                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“± Mobile vs Desktop Comparison

```
MOBILE DEVICE (Android/iOS)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      VoQuadro App       â”‚
â”‚                         â”‚
â”‚  [HybridAIService]      â”‚
â”‚         â†“               â”‚
â”‚   Cloud AI âœ…           â”‚
â”‚   (Primary)             â”‚
â”‚         â†“               â”‚
â”‚   Ollama âŒ             â”‚
â”‚   (Not Available)       â”‚
â”‚         â†“               â”‚
â”‚   Fallback âœ…           â”‚
â”‚   (Backup)              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Internet â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  Gemini  â”‚
    â”‚   API    â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

DESKTOP (Windows/Mac/Linux)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      VoQuadro App       â”‚
â”‚                         â”‚
â”‚  [HybridAIService]      â”‚
â”‚         â†“               â”‚
â”‚   Cloud AI âœ…           â”‚
â”‚   (Primary)             â”‚
â”‚         â†“               â”‚
â”‚   Ollama âœ…             â”‚
â”‚   (Available)           â”‚
â”‚         â†“               â”‚
â”‚   Fallback âœ…           â”‚
â”‚   (Backup)              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â†“           â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Internet â”‚  â”‚ Ollama  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ Local   â”‚
      â†“       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Gemini  â”‚
â”‚   API    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ” Data Flow

```
1. Question Generation:
   User Input (Topic) â†’ HybridAI â†’ Cloud AI â†’ Gemini API
                                        â†“
                             JSON: { "question": "..." }
                                        â†“
                              SpeechSession Object
                                        â†“
                                    User UI

2. Feedback Generation:
   Transcript + Session â†’ HybridAI â†’ Cloud AI â†’ Gemini API
                                                     â†“
                                    JSON: { "feedback_text": {...},
                                           "scores": {...} }
                                                     â†“
                                         Format & Process
                                                     â†“
                                    Map<String, dynamic>
                                                     â†“
                                                 User UI
```

## ğŸ’¾ State Management

```
HybridAIService (Singleton)
â”œâ”€â”€ _cloudAIService: CloudAIService
â”œâ”€â”€ _ollamaService: OllamaService
â”œâ”€â”€ State Variables:
â”‚   â”œâ”€â”€ _isCloudAIAvailable: false â†’ true (on check)
â”‚   â”œâ”€â”€ _isOllamaAvailable: false
â”‚   â”œâ”€â”€ _hasCheckedConnection: false â†’ true (after check)
â”‚   â””â”€â”€ _currentSession: null â†’ SpeechSession
â””â”€â”€ Notifies listeners on state changes
```

## ğŸ¯ Integration Points

```
Your App Screens
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Controllers   â”‚  (Your existing code)
â”‚   â€¢ Speaking    â”‚
â”‚   â€¢ Feedback    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  HybridAIServiceâ”‚  (Updated orchestrator)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   CloudAI       â”‚   Ollama     â”‚   Fallback   â”‚
â”‚   (NEW!)        â”‚   (Existing) â”‚   (Existing) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

**Legend:**

- âœ… = Available/Success
- âŒ = Not Available/Failed
- â†’ = Flow direction
- â†“ = Next step
